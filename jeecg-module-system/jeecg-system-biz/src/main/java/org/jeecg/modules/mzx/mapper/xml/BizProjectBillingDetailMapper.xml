<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.jeecg.modules.mzx.mapper.BizProjectBillingDetailMapper">

    <insert id="generateProjectBillingDetail">
        INSERT INTO biz_project_billing_detail
        (id, project_id, project_name, project_schedule_usage_item_id, schedule_name, staff_id, staff,
         commission, del_flag, create_by, created_time, update_by, update_time)
        select distinct replace(uuid(), '-', ''), project_id,project_name,project_schedule_usage_item_id,schedule_name,staff_id,staff,
                        0,0,null,now(),0,null,now()
        from biz_project_schedule_log
        where del_flag = 0
        and project_id in 
            <foreach collection="projectIds" item="projectId" open="(" close=")" separator=",">
                #{projectId}
            </foreach>


    </insert>
</mapper>
